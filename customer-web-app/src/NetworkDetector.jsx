import React, { Component } from 'react';
// import {Modal } from 'react-bootstrap';

export default function Network(ComposedComponent) {
  class NetworkDetector extends Component {
    state = {
      isDisconnected: false, 
      show:false
    }

    componentDidMount() {
      this.handleConnectionChange();
      window.addEventListener('online', this.handleConnectionChange);
      window.addEventListener('offline', this.handleConnectionChange);
    }

    componentWillUnmount() {
        console.log("hello")
        this.handleConnectionChange();

      window.removeEventListener('online', this.handleConnectionChange);
      window.removeEventListener('offline', this.handleConnectionChange);
    }

    handleClose = () => this.setState({show:false});
    handleShow = () => this.setState({show:true});
    handleConnectionChange = () => {
      const condition = navigator.onLine ? 'online' : 'offline';
      if (condition === 'online') {
        const webPing = setInterval(
          () => {
            fetch('//google.com', {
              mode: 'no-cors',
              })
            .then(() => {
              this.setState({ isDisconnected: false }, () => {
                return clearInterval(webPing)
                // return this.setState({ isDisconnected: false })
              });
            }).catch(() => this.setState({ isDisconnected: true }) )
          }, 2000);
        return;
      }

      return this.setState({ isDisconnected: true });
    }

    render() {
      const { isDisconnected } = this.state;
      return (
        <div>
          { isDisconnected ? (
          // <Modal show={this.state.show} onHide={this.handleClose} centered>
            // {/* <Modal.Body> */}
              <div className="InvalidUrlDiv">
                <svg xmlns="http://www.w3.org/2000/svg" width="204" height="187" viewBox="0 0 204 187" fill="none">
                  <g clip-path="url(#clip0_508_2950)">
                  <path d="M198.79 122.04H171.16C168.82 122.04 166.93 120.15 166.93 117.81V90.18C166.93 87.84 168.82 85.95 171.16 85.95H198.79C201.13 85.95 203.02 87.84 203.02 90.18V117.81C203.02 120.15 201.13 122.04 198.79 122.04Z" fill="#F1F3F9" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M184.349 115.17C190.761 115.17 195.959 109.972 195.959 103.56C195.959 97.1479 190.761 91.95 184.349 91.95C177.937 91.95 172.739 97.1479 172.739 103.56C172.739 109.972 177.937 115.17 184.349 115.17Z" fill="#F1F3F9" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M170.89 90.54C171.602 90.54 172.18 89.9624 172.18 89.25C172.18 88.5375 171.602 87.96 170.89 87.96C170.177 87.96 169.6 88.5375 169.6 89.25C169.6 89.9624 170.177 90.54 170.89 90.54Z" fill="#F1F3F9" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M198.37 90.2399C199.083 90.2399 199.66 89.6624 199.66 88.9499C199.66 88.2375 199.083 87.6599 198.37 87.6599C197.658 87.6599 197.08 88.2375 197.08 88.9499C197.08 89.6624 197.658 90.2399 198.37 90.2399Z" fill="#F1F3F9" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M170.89 120.49C171.602 120.49 172.18 119.912 172.18 119.2C172.18 118.487 171.602 117.91 170.89 117.91C170.177 117.91 169.6 118.487 169.6 119.2C169.6 119.912 170.177 120.49 170.89 120.49Z" fill="#F1F3F9" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M198.37 120.19C199.083 120.19 199.66 119.612 199.66 118.9C199.66 118.187 199.083 117.61 198.37 117.61C197.658 117.61 197.08 118.187 197.08 118.9C197.08 119.612 197.658 120.19 198.37 120.19Z" fill="#F1F3F9" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M184.32 109.17C185.331 109.17 186.15 108.351 186.15 107.34C186.15 106.329 185.331 105.51 184.32 105.51C183.31 105.51 182.49 106.329 182.49 107.34C182.49 108.351 183.31 109.17 184.32 109.17Z" fill="#F1F3F9" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M179.44 103.26C180.163 103.26 180.75 102.074 180.75 100.61C180.75 99.1464 180.163 97.96 179.44 97.96C178.716 97.96 178.13 99.1464 178.13 100.61C178.13 102.074 178.716 103.26 179.44 103.26Z" fill="#F1F3F9" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M189.249 103.26C189.973 103.26 190.559 102.074 190.559 100.61C190.559 99.1464 189.973 97.96 189.249 97.96C188.526 97.96 187.939 99.1464 187.939 100.61C187.939 102.074 188.526 103.26 189.249 103.26Z" fill="#F1F3F9" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M66.2498 152.5C69.5359 152.5 72.1998 149.836 72.1998 146.55C72.1998 143.264 69.5359 140.6 66.2498 140.6C62.9637 140.6 60.2998 143.264 60.2998 146.55C60.2998 149.836 62.9637 152.5 66.2498 152.5Z" fill="#989FB0"/>
                  <path d="M117.419 137.01L129.839 128.01C129.839 128.01 127.679 130.17 129.839 146.73L123.629 155.73C123.619 155.73 116.879 143.67 117.419 137.01Z" fill="#F1F3F9" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M130.65 147.42C130.79 147.43 130.92 147.46 131.06 147.49C132.12 147.75 136.47 149.07 137.86 153.14C137.92 153.33 137.98 153.51 138.03 153.69C138.55 155.69 136.94 157.61 134.88 157.61H126.66C126.28 157.61 125.91 157.55 125.56 157.42C124.91 157.17 123.99 156.68 123.28 155.73C122.16 154.21 122.27 152.45 122.51 151.37C122.66 150.69 123.04 150.08 123.57 149.63C124.14 149.14 124.91 148.6 125.89 148.17C127.88 147.29 129.69 147.32 130.65 147.42Z" fill="white" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M109.18 150.64C109.32 150.65 109.45 150.68 109.59 150.71C110.65 150.97 115 152.29 116.39 156.36C116.45 156.55 116.51 156.73 116.56 156.91C117.08 158.91 115.47 160.83 113.41 160.83H105.19C104.81 160.83 104.44 160.77 104.09 160.64C103.44 160.39 102.52 159.9 101.81 158.95C100.69 157.43 100.8 155.67 101.04 154.59C101.19 153.91 101.57 153.3 102.1 152.85C102.67 152.36 103.44 151.82 104.42 151.39C106.41 150.51 108.21 150.54 109.18 150.64Z" fill="white" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M80.4997 151.72C80.6397 151.73 80.7697 151.76 80.9097 151.79C81.9697 152.05 86.3197 153.37 87.7097 157.44C87.7697 157.63 87.8297 157.81 87.8797 157.99C88.3997 159.99 86.7897 161.91 84.7297 161.91H76.4997C76.1197 161.91 75.7497 161.85 75.3997 161.72C74.7497 161.47 73.8297 160.98 73.1197 160.03C71.9997 158.51 72.1097 156.75 72.3497 155.67C72.4997 154.99 72.8797 154.38 73.4097 153.93C73.9797 153.44 74.7497 152.9 75.7297 152.47C77.7297 151.59 79.5297 151.62 80.4997 151.72Z" fill="white" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M145.02 78.8899C144.7 79.6499 143.54 82.6299 144.88 85.6799C145.36 86.7699 145.7 86.7099 146.32 87.8399C147.82 90.5899 147.97 94.8099 145.78 97.9199C145.3 98.6099 144.27 99.8499 142.36 100.8C142.36 100.8 146.86 109.64 140.38 117.91C133.9 126.18 120.22 136.26 120.22 136.26C120.22 136.26 112.6 144.36 112 147.96C112 147.96 109.6 153.84 96.88 153.96C84.16 154.08 72.52 157.32 69.76 156.72C67 156.12 64.48 154.32 64.72 151.08C64.96 147.84 66.88 126.84 68.92 121.44C70.96 116.04 74.32 110.4 84.16 102.36C94 94.3199 98.63 89.8599 98.07 85.7299C97.51 81.5999 145.02 78.8899 145.02 78.8899Z" fill="#F1F3F9" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M112.56 98.0399C117.11 99.7099 120.71 99.3799 122.52 99.0599C124.12 98.7799 126.64 97.4399 131.7 94.8599C134.08 93.6499 134.89 93.1399 135.78 92.3499C137.33 90.9699 137.63 90.0399 139.55 88.3799C141.21 86.9399 142.06 86.2099 143.06 86.3599C144.98 86.6399 145.94 89.9299 146.17 91.6199C146.5 94.1099 145.62 96.2399 144.85 97.3799C144.67 97.6499 144.02 98.5999 143.05 99.2999C142.59 99.6299 142.37 99.7999 142.18 99.8999C141.54 100.26 141.08 100.35 141.03 100.66C141 100.84 141.12 101 141.17 101.07C141.74 101.84 141.85 102.85 142.24 103.72C142.8 104.98 143.37 109.56 141.26 114.13C140.52 115.73 139.72 116.74 138.11 118.77C137.48 119.56 136.56 120.66 133.38 123.81C132.05 125.13 130.29 126.85 128.16 128.83C125.62 130.83 123.08 132.83 120.54 134.83C118.26 137.41 115.98 139.99 113.7 142.57C112.66 144.47 111.62 146.37 110.58 148.27C109.57 135.98 111.31 127.64 113.22 122.17C113.89 120.26 115.12 117.14 115.38 112.69C115.74 106.59 114.07 101.48 112.56 98.0399Z" fill="white"/>
                  <path d="M98.7994 85.68C95.7694 86.16 92.8994 83.35 91.2394 81.72C88.3294 78.87 85.2094 73.63 86.9194 70.8C87.9094 69.15 89.4794 70.08 92.3194 67.8C94.2994 66.21 94.0094 65.38 96.9994 62.28C99.8494 59.32 100.989 59.16 101.559 59.16C103.379 59.15 104.739 60.72 105.159 61.2C110.079 66.87 105.729 84.59 98.7994 85.68Z" fill="#D6DCE8" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M133.239 55.4399C134.499 54.2099 137.599 54.9999 137.919 55.0799C140.729 55.8199 140.919 57.6799 144.159 59.0399C146.939 60.2099 147.719 59.2199 149.199 60.3599C152.009 62.5199 151.309 67.7299 151.119 69.1199C150.779 71.6499 149.299 77.6999 146.199 78.2399C140.119 79.2999 129.669 58.9199 133.239 55.4399Z" fill="#D6DCE8" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M145.479 75.1799C145.379 82.7299 140.279 87.9499 138.519 89.7599C132.759 95.6599 125.859 96.8999 123.279 97.3199C120.939 97.6999 107.449 99.9199 100.839 91.5599C96.7394 86.3699 97.3594 79.7199 97.8394 74.6399C98.2394 70.3799 98.7894 64.5799 102.879 59.8799C109.459 52.3199 122.209 51.0399 131.559 55.5599C137.949 58.6499 145.599 65.8199 145.479 75.1799Z" fill="white" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M135.499 87.81C135.629 94.19 127.429 97.9 122.919 98.85C120.999 99.25 116.079 100.28 112.719 97.2C109.829 94.56 109.899 90.55 109.959 89.52C110.279 83.89 115.319 77.98 121.959 77.52C128.539 77.06 135.379 82.05 135.499 87.81Z" fill="#F1F3F9" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M130.66 91.3198C130.86 94.8498 127.02 97.5398 123.82 98.0998C120.45 98.6898 116.11 97.2398 115.16 94.1998C114.05 90.6198 117.97 85.7998 122.49 85.4298C126.12 85.1398 130.45 87.6998 130.66 91.3198Z" fill="#D6DCE8" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M115.36 70.4398C117.57 74.8798 114.1 79.1798 113.68 79.6798C111.98 81.7098 108.29 84.3598 104.68 82.9198C101.27 81.5598 100.22 77.4498 100.36 74.7598C100.54 71.2598 102.87 66.8898 107.2 66.2398C110.38 65.7598 113.84 67.3998 115.36 70.4398Z" fill="#F1F3F9" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M107.499 79.8597C110.018 79.8597 112.059 77.8182 112.059 75.2998C112.059 72.7813 110.018 70.7397 107.499 70.7397C104.981 70.7397 102.939 72.7813 102.939 75.2998C102.939 77.8182 104.981 79.8597 107.499 79.8597Z" fill="white"/>
                  <path d="M112 75.8098C112 77.8798 110.32 79.5598 108.25 79.5598C106.18 79.5598 104.5 77.8798 104.5 75.8098C104.5 75.3798 104.57 74.9698 104.71 74.5898C104.93 74.8198 105.25 74.9698 105.6 74.9698C106.27 74.9698 106.81 74.4298 106.81 73.7498C106.81 73.2898 106.56 72.8898 106.18 72.6898C106.77 72.2898 107.49 72.0598 108.25 72.0598C110.32 72.0598 112 73.7398 112 75.8098Z" fill="#989FB0"/>
                  <path d="M132.94 75.8097C130.87 75.7297 129.26 73.9797 129.34 71.9097C129.42 69.8397 131.17 68.2297 133.24 68.3097C133.67 68.3297 134.08 68.4097 134.45 68.5697C134.21 68.7797 134.05 69.0897 134.03 69.4397C134 70.1097 134.52 70.6697 135.2 70.6997C135.66 70.7197 136.07 70.4797 136.28 70.1097C136.66 70.7197 136.86 71.4397 136.83 72.1997C136.75 74.2797 135.01 75.8897 132.94 75.8097Z" fill="#989FB0"/>
                  <path d="M126.69 82.31C126.62 82.66 125.3 82.84 122.67 83.19C119.86 83.56 118.45 83.74 118.28 83.39C117.96 82.74 119.72 80.66 121.94 80.3C124.35 79.9 126.83 81.58 126.69 82.31Z" fill="#989FB0"/>
                  <path d="M127.18 125.74C126.59 125.74 126.11 125.26 126.11 124.67V120.94C126.11 120.35 126.59 119.87 127.18 119.87C127.77 119.87 128.25 120.35 128.25 120.94V124.67C128.25 125.26 127.77 125.74 127.18 125.74Z" fill="#989FB0"/>
                  <path d="M133.44 125.74C132.85 125.74 132.37 125.26 132.37 124.67V120.94C132.37 120.35 132.85 119.87 133.44 119.87C134.03 119.87 134.51 120.35 134.51 120.94V124.67C134.51 125.26 134.03 125.74 133.44 125.74Z" fill="#989FB0"/>
                  <path d="M1 164.76C35.08 163.15 44.9 163.44 44.98 164.34C45.09 165.64 25.05 166.85 24.52 171.96C24.11 175.93 35.72 180.1 39.94 181.62C45.33 183.56 60.31 188.24 79.72 184.68C86.56 183.43 91.43 182.62 96.64 178.92C103.33 174.17 106.35 167.81 108.52 163.08C111.97 155.57 112.68 149.4 113.74 139.5C114.42 133.15 114.96 124.49 114.46 114.12C114.07 108.64 113.98 103.86 114.01 99.9001C114.03 96.9601 114.13 94.0401 116.02 91.3301C116.57 90.5401 117.55 89.3701 119.08 88.4301C120 87.8601 123.51 85.7001 127.02 87.2201C129.74 88.3901 131.51 91.3601 131.56 94.7101V105C131.56 106.55 131.56 108.11 131.56 109.66C131.56 111.07 131.56 112.47 131.56 113.88" stroke="#989FB0" stroke-width="2" strokeMiterlimit="10" stroke-linecap="round"/>
                  <path d="M136.41 120.8H124.15C123.76 120.8 123.53 120.36 123.75 120.05C124.59 118.87 125.87 116.58 125.86 113.5C125.85 111.15 125.09 109.27 124.36 108C124.13 107.59 124.55 107.13 124.97 107.33C126.28 107.94 128.14 108.53 130.4 108.51C132.57 108.49 134.34 107.91 135.61 107.31C136.04 107.11 136.47 107.56 136.24 107.98C135.53 109.25 134.79 111.12 134.77 113.46C134.74 116.56 135.99 118.86 136.82 120.06C137.03 120.37 136.79 120.8 136.41 120.8Z" fill="#F1F3F9" stroke="#AAB2C2" strokeMiterlimit="10"/>
                  <path d="M122.47 38.52L120.4 37.08L118.25 16.2L122.82 17.6399L122.47 38.52Z" fill="#B8BFCD"/>
                  <path d="M113.56 33.84L110.28 32.22L108.25 0L113.56 2.7V33.84Z" fill="#B8BFCD"/>
                  <path d="M111.58 36.45L113.56 37.6199V41.22L110.9 39.8699L111.58 36.45Z" fill="#B8BFCD"/>
                  <path d="M120.18 40.6299C120.99 40.7699 121.8 40.8999 122.61 41.0399C122.64 42.3499 122.67 43.6599 122.69 44.9799C121.73 44.6599 120.77 44.3399 119.82 44.0099C119.93 42.8799 120.06 41.7599 120.18 40.6299Z" fill="#B8BFCD"/>
                  </g>
                  <defs>
                  <clipPath id="clip0_508_2950">
                  <rect width="203.52" height="186.98" fill="white"/>
                  </clipPath>
                  </defs>
                </svg>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <h5 className='InvalidUrlH5 mt-3'>Something went wrong</h5>
                <p></p>
                <p className='InvalidUrlPar' >Check your connection and try again</p>
                  {/* <p>Internet connection lost</p> */}
              </div>
          //   </Modal.Body>
          // </Modal>
          ):<ComposedComponent {...this.props} />
          }
          
        </div>
      );
    }
  }

  return NetworkDetector;
}